{% extends "base_aula.html" %}

{% block title %}Aula 10 - Projeto Final Repetitiva | CodeLogic{% endblock %}
{% block lesson_title %}Aula 10 - Projeto Final: Simulador de Jogo{% endblock %}

{% block theory_content %}
<div class="content-section">
    <h2>ğŸ¯ Objetivos do Projeto</h2>
    <ul>
        <li>Integrar todos os tipos de loops (for, while, aninhados)</li>
        <li>Aplicar break, continue e else em loops</li>
        <li>Criar um jogo completo com mÃºltiplas funcionalidades</li>
        <li>Implementar menus, validaÃ§Ãµes e controle de fluxo</li>
    </ul>
</div>

<div class="content-section">
    <h2>ğŸ® VisÃ£o Geral do Projeto</h2>
    <p>
        Vamos criar um <strong>Simulador de RPG Textual</strong> com sistema de batalha,
        inventÃ¡rio, nÃ­veis e mÃºltiplas opÃ§Ãµes de jogo.
    </p>
    
    <div class="highlight-box">
        <h3>ğŸ² Funcionalidades do Jogo:</h3>
        <ul>
            <li>âš”ï¸ Sistema de batalha por turnos</li>
            <li>ğŸ“¦ Gerenciamento de inventÃ¡rio</li>
            <li>ğŸ“ˆ Sistema de experiÃªncia e nÃ­veis</li>
            <li>ğŸ›ï¸ Loja de itens e equipamentos</li>
            <li>ğŸ—ºï¸ ExploraÃ§Ã£o de mundos</li>
        </ul>
    </div>
</div>

<div class="content-section">
    <h2>ğŸ‘¤ Sistema de Personagem</h2>
    
    <div class="code-example">
        <h3>Classe Personagem:</h3>
        <pre><code>import random

class Personagem:
    def __init__(self, nome):
        self.nome = nome
        self.nivel = 1
        self.vida_max = 100
        self.vida_atual = 100
        self.mana_max = 50
        self.mana_atual = 50
        self.experiencia = 0
        self.exp_proximo_nivel = 100
        self.ouro = 50
        self.ataque = 15
        self.defesa = 5
        self.inventario = []
    
    def subir_nivel(self):
        """Sistema de progressÃ£o com loop"""
        while self.experiencia >= self.exp_proximo_nivel:
            self.experiencia -= self.exp_proximo_nivel
            self.nivel += 1
            
            # Aumentar atributos
            self.vida_max += 20
            self.mana_max += 10
            self.ataque += 3
            self.defesa += 2
            
            # Calcular prÃ³ximo nÃ­vel
            self.exp_proximo_nivel = int(self.exp_proximo_nivel * 1.5)
            
            print(f"ğŸ‰ {self.nome} subiu para o nÃ­vel {self.nivel}!")
            print(f"   ğŸ’ª Ataque: {self.ataque} | ğŸ›¡ï¸ Defesa: {self.defesa}")
    
    def recuperar_vida(self):
        """Recupera vida com animaÃ§Ã£o"""
        print("ğŸ’š Recuperando vida...")
        for i in range(5):
            if self.vida_atual < self.vida_max:
                self.vida_atual = min(self.vida_atual + 10, self.vida_max)
                print(f"   HP: {self.vida_atual}/{self.vida_max}")
            else:
                print("   Vida jÃ¡ estÃ¡ cheia!")
                break</code></pre>
    </div>
</div>

<div class="content-section">
    <h2>âš”ï¸ Sistema de Batalha</h2>
    
    <div class="code-example">
        <h3>LÃ³gica de Combate:</h3>
        <pre><code>def batalhar(jogador, inimigo_nome, inimigo_vida, inimigo_ataque):
    """Sistema de batalha por turnos"""
    print(f"\nâš”ï¸ BATALHA INICIADA: {jogador.nome} vs {inimigo_nome}")
    print("=" * 50)
    
    inimigo_vida_max = inimigo_vida
    turno = 1
    
    while jogador.vida_atual > 0 and inimigo_vida > 0:
        print(f"\nğŸ”„ TURNO {turno}")
        print(f"ğŸ‘¤ {jogador.nome}: {jogador.vida_atual}/{jogador.vida_max} HP")
        print(f"ğŸ‘¹ {inimigo_nome}: {inimigo_vida}/{inimigo_vida_max} HP")
        
        # Turno do jogador
        while True:  # Loop para validar entrada
            print("\nğŸ“ Escolha sua aÃ§Ã£o:")
            print("1. âš”ï¸ Atacar")
            print("2. ğŸ›¡ï¸ Defender")
            print("3. ğŸ’¨ Tentar fugir")
            
            acao = input("Digite sua escolha (1-3): ").strip()
            
            if acao in ['1', '2', '3']:
                break
            else:
                print("âŒ OpÃ§Ã£o invÃ¡lida! Tente novamente.")
                continue
        
        # Processar aÃ§Ã£o do jogador
        if acao == '1':  # Atacar
            dano = random.randint(jogador.ataque - 5, jogador.ataque + 5)
            inimigo_vida -= dano
            print(f"âš”ï¸ {jogador.nome} atacou e causou {dano} de dano!")
            
        elif acao == '2':  # Defender
            defesa_extra = random.randint(5, 15)
            jogador.defesa += defesa_extra
            print(f"ğŸ›¡ï¸ {jogador.nome} se defendeu (+{defesa_extra} defesa neste turno)!")
            
        elif acao == '3':  # Fugir
            chance_fuga = random.randint(1, 100)
            if chance_fuga <= 30:
                print(f"ğŸ’¨ {jogador.nome} conseguiu fugir!")
                return False
            else:
                print(f"ğŸ’¨ {jogador.nome} tentou fugir mas nÃ£o conseguiu!")
        
        # Verificar se inimigo morreu
        if inimigo_vida <= 0:
            break
        
        # Turno do inimigo
        dano_inimigo = random.randint(inimigo_ataque - 3, inimigo_ataque + 3)
        dano_real = max(1, dano_inimigo - jogador.defesa)
        jogador.vida_atual -= dano_real
        
        print(f"ğŸ‘¹ {inimigo_nome} atacou e causou {dano_real} de dano!")
        
        # Resetar defesa extra se usou
        if acao == '2':
            jogador.defesa -= defesa_extra
        
        turno += 1
        
        # Pausa dramÃ¡tica
        input("Pressione Enter para continuar...")
    
    # Resultado da batalha
    if jogador.vida_atual <= 0:
        print(f"\nğŸ’€ {jogador.nome} foi derrotado!")
        return False
    else:
        exp_ganha = random.randint(30, 60)
        ouro_ganho = random.randint(10, 25)
        
        print(f"\nğŸ‰ VITÃ“RIA!")
        print(f"ğŸ’° VocÃª ganhou {ouro_ganho} de ouro")
        print(f"â­ VocÃª ganhou {exp_ganha} de experiÃªncia")
        
        jogador.experiencia += exp_ganha
        jogador.ouro += ouro_ganho
        jogador.subir_nivel()
        
        return True</code></pre>
    </div>
</div>

<div class="content-section">
    <h2>ğŸ›ï¸ Sistema de Loja</h2>
    
    <div class="code-example">
        <h3>Loja com ValidaÃ§Ãµes:</h3>
        <pre><code>def loja(jogador):
    """Sistema de loja com loops de validaÃ§Ã£o"""
    itens_loja = {
        '1': {'nome': 'PoÃ§Ã£o de Vida', 'preco': 15, 'efeito': 'vida'},
        '2': {'nome': 'PoÃ§Ã£o de Mana', 'preco': 12, 'efeito': 'mana'},
        '3': {'nome': 'Espada de Ferro', 'preco': 100, 'efeito': 'ataque'},
        '4': {'nome': 'Armadura de Couro', 'preco': 80, 'efeito': 'defesa'},
        '5': {'nome': 'Anel da Sorte', 'preco': 200, 'efeito': 'especial'}
    }
    
    while True:
        print(f"\nğŸª BEM-VINDO Ã€ LOJA!")
        print(f"ğŸ’° Seu ouro: {jogador.ouro}")
        print("=" * 40)
        
        # Mostrar itens disponÃ­veis
        for codigo, item in itens_loja.items():
            print(f"{codigo}. {item['nome']} - {item['preco']} ouro")
        
        print("0. ğŸšª Sair da loja")
        
        escolha = input("\nO que deseja comprar? ").strip()
        
        if escolha == '0':
            print("ğŸ‘‹ Volte sempre!")
            break
        
        if escolha not in itens_loja:
            print("âŒ Item nÃ£o encontrado!")
            continue
        
        item = itens_loja[escolha]
        
        if jogador.ouro < item['preco']:
            print(f"ğŸ’¸ VocÃª nÃ£o tem ouro suficiente! Precisa de {item['preco']} ouro.")
            continue
        
        # Confirmar compra
        while True:
            confirmacao = input(f"Comprar {item['nome']} por {item['preco']} ouro? (s/n): ").lower()
            
            if confirmacao in ['s', 'sim', 'y', 'yes']:
                jogador.ouro -= item['preco']
                jogador.inventario.append(item['nome'])
                
                # Aplicar efeito
                if item['efeito'] == 'vida':
                    jogador.vida_max += 20
                    jogador.vida_atual += 20
                elif item['efeito'] == 'mana':
                    jogador.mana_max += 15
                    jogador.mana_atual += 15
                elif item['efeito'] == 'ataque':
                    jogador.ataque += 8
                elif item['efeito'] == 'defesa':
                    jogador.defesa += 5
                
                print(f"âœ… {item['nome']} comprado com sucesso!")
                break
                
            elif confirmacao in ['n', 'nÃ£o', 'nao', 'no']:
                print("âŒ Compra cancelada.")
                break
            else:
                print("âŒ Digite 's' para sim ou 'n' para nÃ£o.")
                continue</code></pre>
    </div>
</div>

<div class="content-section">
    <h2>ğŸ—ºï¸ Sistema de ExploraÃ§Ã£o</h2>
    
    <div class="code-example">
        <h3>ExploraÃ§Ã£o com Eventos AleatÃ³rios:</h3>
        <pre><code>def explorar(jogador):
    """Sistema de exploraÃ§Ã£o com eventos aleatÃ³rios"""
    locais = [
        {'nome': 'Floresta Sombria', 'dificuldade': 1},
        {'nome': 'Caverna Misteriosa', 'dificuldade': 2},
        {'nome': 'Montanha Gelada', 'dificuldade': 3},
        {'nome': 'PÃ¢ntano Venenoso', 'dificuldade': 4},
        {'nome': 'Castelo Assombrado', 'dificuldade': 5}
    ]
    
    print("\nğŸ—ºï¸ ESCOLHA UM LOCAL PARA EXPLORAR:")
    print("=" * 40)
    
    for i, local in enumerate(locais, 1):
        dificuldade_texto = "â­" * local['dificuldade']
        print(f"{i}. {local['nome']} {dificuldade_texto}")
    
    while True:
        try:
            escolha = int(input("\nEscolha um local (1-5): "))
            if 1 <= escolha <= 5:
                local_escolhido = locais[escolha - 1]
                break
            else:
                print("âŒ Escolha um nÃºmero entre 1 e 5!")
        except ValueError:
            print("âŒ Digite um nÃºmero vÃ¡lido!")
    
    print(f"\nğŸš¶ Explorando {local_escolhido['nome']}...")
    
    # Sistema de eventos durante exploraÃ§Ã£o
    eventos_possiveis = 3 + local_escolhido['dificuldade']
    
    for evento in range(eventos_possiveis):
        print(f"\nğŸ“ Evento {evento + 1}/{eventos_possiveis}")
        
        # Pausa para suspense
        import time
        for i in range(3):
            print(".", end="", flush=True)
            time.sleep(0.5)
        print()
        
        # Evento aleatÃ³rio
        chance = random.randint(1, 100)
        
        if chance <= 40:  # Encontrar inimigo
            inimigos = [
                ('Goblin', 40, 8),
                ('Orc', 60, 12),
                ('DragÃ£o BebÃª', 80, 15),
                ('Esqueleto Guerreiro', 100, 18),
                ('Lich Sombrio', 150, 25)
            ]
            
            inimigo = inimigos[local_escolhido['dificuldade'] - 1]
            nome, vida, ataque = inimigo
            
            print(f"ğŸ‘¹ Um {nome} apareceu!")
            
            venceu = batalhar(jogador, nome, vida, ataque)
            if not venceu:
                return  # Sair da exploraÃ§Ã£o se perdeu ou fugiu
                
        elif chance <= 65:  # Encontrar tesouro
            ouro_encontrado = random.randint(5, 20) * local_escolhido['dificuldade']
            print(f"ğŸ’° VocÃª encontrou {ouro_encontrado} de ouro!")
            jogador.ouro += ouro_encontrado
            
        elif chance <= 80:  # Evento de cura
            print("ğŸŒ¿ VocÃª encontrou uma fonte mÃ¡gica!")
            jogador.vida_atual = jogador.vida_max
            jogador.mana_atual = jogador.mana_max
            print("ğŸ’š Vida e mana restauradas!")
            
        else:  # Nada acontece
            print("ğŸƒ VocÃª caminha em paz... tudo estÃ¡ calmo.")
        
        if jogador.vida_atual <= 0:
            print(f"\nğŸ’€ {jogador.nome} nÃ£o sobreviveu Ã  exploraÃ§Ã£o...")
            return
    
    print(f"\nğŸ‰ ExploraÃ§Ã£o de {local_escolhido['nome']} concluÃ­da!")
    bonus_exp = 20 * local_escolhido['dificuldade']
    print(f"â­ BÃ´nus de exploraÃ§Ã£o: {bonus_exp} EXP")
    jogador.experiencia += bonus_exp
    jogador.subir_nivel()</code></pre>
    </div>
</div>

<div class="content-section">
    <h2>ğŸ¯ Menu Principal</h2>
    
    <div class="code-example">
        <h3>Sistema de Menu Completo:</h3>
        <pre><code>def menu_principal(jogador):
    """Menu principal do jogo com validaÃ§Ã£o"""
    while True:
        print(f"\nğŸ® === RPG TEXTUAL ===")
        print(f"ğŸ‘¤ Jogador: {jogador.nome} (NÃ­vel {jogador.nivel})")
        print(f"â¤ï¸ Vida: {jogador.vida_atual}/{jogador.vida_max}")
        print(f"ğŸ’™ Mana: {jogador.mana_atual}/{jogador.mana_max}")
        print(f"ğŸ’° Ouro: {jogador.ouro}")
        print("=" * 30)
        
        opcoes = [
            "ğŸ—ºï¸ Explorar",
            "ğŸ›ï¸ Loja",
            "ğŸ’ InventÃ¡rio",
            "ğŸ’š Descansar",
            "ğŸ“Š Status",
            "ğŸšª Sair do Jogo"
        ]
        
        for i, opcao in enumerate(opcoes, 1):
            print(f"{i}. {opcao}")
        
        while True:
            try:
                escolha = int(input("\nEscolha uma opÃ§Ã£o: "))
                if 1 <= escolha <= len(opcoes):
                    break
                else:
                    print(f"âŒ Escolha um nÃºmero entre 1 e {len(opcoes)}!")
            except ValueError:
                print("âŒ Digite um nÃºmero vÃ¡lido!")
        
        # Processar escolha
        if escolha == 1:
            explorar(jogador)
        elif escolha == 2:
            loja(jogador)
        elif escolha == 3:
            mostrar_inventario(jogador)
        elif escolha == 4:
            descansar(jogador)
        elif escolha == 5:
            mostrar_status(jogador)
        elif escolha == 6:
            print("ğŸ‘‹ Obrigado por jogar!")
            break
        
        if jogador.vida_atual <= 0:
            print("\nğŸ’€ GAME OVER!")
            break

def iniciar_jogo():
    """FunÃ§Ã£o principal para iniciar o jogo"""
    print("ğŸ® BEM-VINDO AO RPG TEXTUAL!")
    print("=" * 30)
    
    while True:
        nome = input("Digite o nome do seu personagem: ").strip()
        if nome:
            break
        else:
            print("âŒ Nome nÃ£o pode estar vazio!")
    
    jogador = Personagem(nome)
    print(f"\nâœ¨ {nome} foi criado com sucesso!")
    
    menu_principal(jogador)</code></pre>
    </div>
</div>

<div class="content-section">
    <h2>ğŸ”§ Conceitos de Loops Aplicados</h2>
    <ul>
        <li><strong>While True:</strong> Menus principais e validaÃ§Ãµes</li>
        <li><strong>For range():</strong> Eventos de exploraÃ§Ã£o e animaÃ§Ãµes</li>
        <li><strong>Break/Continue:</strong> Controle de fluxo em batalhas</li>
        <li><strong>Loops aninhados:</strong> Menus dentro de outros sistemas</li>
        <li><strong>While com condiÃ§Ã£o:</strong> Batalhas e progressÃ£o de nÃ­vel</li>
    </ul>
</div>
{% endblock %}

{% block exercise_content %}
<div class="exercise-header">
    <h2>ğŸ‹ï¸â€â™‚ï¸ Projeto Final</h2>
    <p>Complete o Simulador de RPG Textual</p>
</div>

<div class="exercise-description">
    <h3>ğŸ“‹ Sua MissÃ£o:</h3>
    <ol>
        <li>Implemente a funÃ§Ã£o <code>mostrar_inventario()</code></li>
        <li>Complete a funÃ§Ã£o <code>descansar()</code> com animaÃ§Ã£o</li>
        <li>Adicione sistema de magias que gasta mana</li>
        <li>Crie um boss final especial</li>
        <li>Implemente save/load do jogo</li>
        <li>Teste todas as funcionalidades</li>
    </ol>
</div>

<div class="exercise-requirements">
    <h3>ğŸ¯ Funcionalidades ObrigatÃ³rias:</h3>
    <ul>
        <li><strong>InventÃ¡rio:</strong> Mostrar itens e permitir usar</li>
        <li><strong>Descanso:</strong> Recuperar vida/mana com animaÃ§Ã£o</li>
        <li><strong>Sistema de Magia:</strong> 3 magias diferentes que gastam mana</li>
        <li><strong>Boss Final:</strong> Inimigo especial com 300 HP</li>
        <li><strong>ValidaÃ§Ãµes:</strong> Entrada do usuÃ¡rio sempre validada</li>
    </ul>
</div>

<div class="exercise-bonus">
    <h3>ğŸŒŸ Funcionalidades BÃ´nus:</h3>
    <ul>
        <li>Sistema de save/load usando arquivos</li>
        <li>Diferentes classes de personagem</li>
        <li>Sistema de crafting de itens</li>
        <li>Mais locais para explorar</li>
    </ul>
</div>

<div class="exercise-hints">
    <h3>ğŸ’¡ Dicas Importantes:</h3>
    <ul>
        <li>Use while True para menus que precisam validaÃ§Ã£o</li>
        <li>For range() Ã© ideal para animaÃ§Ãµes e contadores</li>
        <li>Break e continue controlam o fluxo dos loops</li>
        <li>Try/except para validar entrada numÃ©rica</li>
    </ul>
</div>

<div class="expected-output">
    <h3>ğŸ“¤ Resultado Esperado:</h3>
    <pre>ğŸ® === RPG TEXTUAL ===
ğŸ‘¤ Jogador: HerÃ³i (NÃ­vel 3)
â¤ï¸ Vida: 140/140
ğŸ’™ Mana: 80/80
ğŸ’° Ouro: 250

1. ğŸ—ºï¸ Explorar
2. ğŸ›ï¸ Loja
3. ğŸ’ InventÃ¡rio
4. ğŸ’š Descansar
5. ğŸ“Š Status
6. ğŸšª Sair do Jogo</pre>
</div>
{% endblock %}

{% block starter_code %}
# Projeto Final: Simulador de RPG Textual
# Complete as funÃ§Ãµes abaixo

import random
import time

class Personagem:
    def __init__(self, nome):
        self.nome = nome
        self.nivel = 1
        self.vida_max = 100
        self.vida_atual = 100
        self.mana_max = 50
        self.mana_atual = 50
        self.experiencia = 0
        self.exp_proximo_nivel = 100
        self.ouro = 50
        self.ataque = 15
        self.defesa = 5
        self.inventario = []

def mostrar_inventario(jogador):
    """
    Mostra inventÃ¡rio e permite usar itens
    Use loops para navegaÃ§Ã£o
    """
    # Seu cÃ³digo aqui
    pass

def descansar(jogador):
    """
    Sistema de descanso com animaÃ§Ã£o
    Use for range() para criar animaÃ§Ã£o
    """
    # Seu cÃ³digo aqui
    pass

def sistema_magia(jogador, inimigo_vida):
    """
    Sistema de magias que gasta mana
    Retorna dano causado ou 0 se nÃ£o tiver mana
    """
    magias = {
        '1': {'nome': 'Bola de Fogo', 'dano': 25, 'mana': 15},
        '2': {'nome': 'Raio GÃ©lido', 'dano': 20, 'mana': 12},
        '3': {'nome': 'Cura Divina', 'dano': -30, 'mana': 20}  # Dano negativo = cura
    }
    
    # Seu cÃ³digo aqui
    pass

def boss_final(jogador):
    """
    Batalha contra boss final
    Use while para loop de batalha especial
    """
    print("\nğŸ‰ O DRAGÃƒO ANCIÃƒO APARECEU!")
    boss_vida = 300
    boss_ataque = 30
    
    # Seu cÃ³digo aqui
    pass

def mostrar_status(jogador):
    """Mostra status detalhado do jogador"""
    print(f"\nğŸ“Š STATUS DE {jogador.nome.upper()}")
    print("=" * 40)
    print(f"ğŸ† NÃ­vel: {jogador.nivel}")
    print(f"â¤ï¸ Vida: {jogador.vida_atual}/{jogador.vida_max}")
    print(f"ğŸ’™ Mana: {jogador.mana_atual}/{jogador.mana_max}")
    print(f"âš”ï¸ Ataque: {jogador.ataque}")
    print(f"ğŸ›¡ï¸ Defesa: {jogador.defesa}")
    print(f"â­ EXP: {jogador.experiencia}/{jogador.exp_proximo_nivel}")
    print(f"ğŸ’° Ouro: {jogador.ouro}")
    print(f"ğŸ’ Itens no inventÃ¡rio: {len(jogador.inventario)}")

# Teste bÃ¡sico do sistema
if __name__ == "__main__":
    print("ğŸ® TESTE DO SISTEMA RPG")
    jogador_teste = Personagem("HerÃ³i")
    
    print("Testando status...")
    mostrar_status(jogador_teste)
    
    # Teste suas funÃ§Ãµes aqui
    # mostrar_inventario(jogador_teste)
    # descansar(jogador_teste)
{% endblock %}