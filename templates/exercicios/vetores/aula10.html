{% extends "base_aula.html" %}

{% block title %}Aula 10 - Projeto Final Vetores | CodeLogic{% endblock %}

{% block lesson_title %}Aula 10 – Projeto Final: Sistema de Análise de Vendas{% endblock %}

{% block lesson_content %}
    <section>
        <h2>🎯 Objetivo do Projeto</h2>
        <p>Integrar todos os conceitos aprendidos sobre listas, tuplas, sets e dicionários em um projeto completo!</p>
        <ul>
            <li>✅ Trabalhar com estruturas de dados combinadas</li>
            <li>✅ Processar e analisar dados reais</li>
            <li>✅ Gerar relatórios completos</li>
            <li>✅ Aplicar tudo que aprendeu no módulo</li>
        </ul>
    </section>

    <section>
        <h2>📊 O Projeto: Sistema de Análise de Vendas</h2>
        <p>Você vai criar um sistema que analisa vendas de uma empresa, gerando estatísticas e relatórios.</p>
        
        <div class="highlight-box">
            <h3>Funcionalidades do Sistema:</h3>
            <ul>
                <li>📥 Armazenar dados de vendas</li>
                <li>📊 Calcular estatísticas (média, máxima, mínima)</li>
                <li>🏆 Identificar melhores vendedores e produtos</li>
                <li>📈 Gerar gráfico simples de vendas</li>
                <li>📋 Criar relatórios formatados</li>
            </ul>
        </div>
    </section>

    <section>
        <h2>💡 Estrutura de Dados</h2>
        <p>Vamos usar diferentes estruturas para armazenar os dados:</p>
        
        <pre><code># Lista de vendas (cada venda é um dicionário)
vendas = [
    {'vendedor': 'Ana Silva', 'produto': 'Notebook', 'valor': 3500.00, 'mes': 'Janeiro'},
    {'vendedor': 'Bruno Costa', 'produto': 'Mouse', 'valor': 45.00, 'mes': 'Janeiro'},
    {'vendedor': 'Ana Silva', 'produto': 'Teclado', 'valor': 120.00, 'mes': 'Fevereiro'},
    # ... mais vendas
]

# Dicionário para acumular totais
totais_vendedor = {}

# Set para produtos únicos
produtos_vendidos = set()

# Tupla para categorias
categorias = ('Hardware', 'Software', 'Acessórios')</code></pre>
    </section>

    <section>
        <h2>🎮 Projeto Completo</h2>
        <div class="exercise-box">
            <h3>Sistema de Análise de Vendas</h3>
            <p>Execute o código completo e observe como todas as estruturas trabalham juntas!</p>
            
            <textarea id="code-input"># 🏪 SISTEMA DE ANÁLISE DE VENDAS
# Projeto Final - Módulo Vetores

print('=' * 80)
print('🏪 SISTEMA DE ANÁLISE DE VENDAS'.center(80))
print('=' * 80)

# 📊 DADOS DE VENDAS
vendas = [
    {'vendedor': 'Ana Silva', 'produto': 'Notebook', 'valor': 3500.00, 'mes': 'Janeiro', 'categoria': 'Hardware'},
    {'vendedor': 'Bruno Costa', 'produto': 'Mouse', 'valor': 45.00, 'mes': 'Janeiro', 'categoria': 'Acessórios'},
    {'vendedor': 'Carlos Lima', 'produto': 'Windows 11', 'valor': 899.00, 'mes': 'Janeiro', 'categoria': 'Software'},
    {'vendedor': 'Ana Silva', 'produto': 'Teclado', 'valor': 120.00, 'mes': 'Fevereiro', 'categoria': 'Acessórios'},
    {'vendedor': 'Diana Rocha', 'produto': 'Monitor', 'valor': 1200.00, 'mes': 'Fevereiro', 'categoria': 'Hardware'},
    {'vendedor': 'Bruno Costa', 'produto': 'Office 365', 'valor': 299.00, 'mes': 'Fevereiro', 'categoria': 'Software'},
    {'vendedor': 'Carlos Lima', 'produto': 'SSD 1TB', 'valor': 450.00, 'mes': 'Março', 'categoria': 'Hardware'},
    {'vendedor': 'Ana Silva', 'produto': 'Webcam', 'valor': 250.00, 'mes': 'Março', 'categoria': 'Acessórios'},
    {'vendedor': 'Diana Rocha', 'produto': 'Notebook', 'valor': 4200.00, 'mes': 'Março', 'categoria': 'Hardware'},
    {'vendedor': 'Bruno Costa', 'produto': 'Mouse Pad', 'valor': 25.00, 'mes': 'Abril', 'categoria': 'Acessórios'},
    {'vendedor': 'Carlos Lima', 'produto': 'Monitor', 'valor': 1350.00, 'mes': 'Abril', 'categoria': 'Hardware'},
    {'vendedor': 'Ana Silva', 'produto': 'Antivírus', 'valor': 180.00, 'mes': 'Abril', 'categoria': 'Software'}
]

print(f'\n📅 Total de vendas registradas: {len(vendas)}')

# =============================================================================
# PARTE 1: ANÁLISE GERAL
# =============================================================================
print('\n' + '=' * 80)
print('📊 ANÁLISE GERAL'.center(80))
print('=' * 80)

# Calcular valor total
total_vendas = 0
for venda in vendas:
    total_vendas += venda['valor']

print(f'\n💰 Faturamento Total: R$ {total_vendas:,.2f}')

# Calcular média, maior e menor venda
soma = 0
maior_venda = 0
menor_venda = 999999
produto_maior = ''
produto_menor = ''

for venda in vendas:
    valor = venda['valor']
    soma += valor
    
    if valor > maior_venda:
        maior_venda = valor
        produto_maior = venda['produto']
    
    if valor < menor_venda:
        menor_venda = valor
        produto_menor = venda['produto']

media = soma / len(vendas)

print(f'📊 Valor Médio: R$ {media:,.2f}')
print(f'🏆 Maior Venda: R$ {maior_venda:,.2f} ({produto_maior})')
print(f'📉 Menor Venda: R$ {menor_venda:,.2f} ({produto_menor})')

# =============================================================================
# PARTE 2: ANÁLISE POR VENDEDOR
# =============================================================================
print('\n' + '=' * 80)
print('👤 DESEMPENHO DOS VENDEDORES'.center(80))
print('=' * 80)

# Acumular vendas por vendedor
vendas_por_vendedor = {}
quantidade_por_vendedor = {}

for venda in vendas:
    vendedor = venda['vendedor']
    valor = venda['valor']
    
    # Acumular valor
    if vendedor in vendas_por_vendedor:
        vendas_por_vendedor[vendedor] += valor
    else:
        vendas_por_vendedor[vendedor] = valor
    
    # Contar quantidade
    if vendedor in quantidade_por_vendedor:
        quantidade_por_vendedor[vendedor] += 1
    else:
        quantidade_por_vendedor[vendedor] = 1

# Exibir ranking
print(f'\n{'Vendedor':<20} {'Qtd Vendas':>12} {'Total':>15} {'Média':>15}')
print('-' * 80)

for vendedor in sorted(vendas_por_vendedor.keys()):
    total = vendas_por_vendedor[vendedor]
    qtd = quantidade_por_vendedor[vendedor]
    media_vendedor = total / qtd
    
    print(f'{vendedor:<20} {qtd:>12} R$ {total:>12,.2f} R$ {media_vendedor:>12,.2f}')

# Encontrar melhor vendedor
melhor_vendedor = ''
melhor_valor = 0

for vendedor, valor in vendas_por_vendedor.items():
    if valor > melhor_valor:
        melhor_valor = valor
        melhor_vendedor = vendedor

print(f'\n🏆 Melhor Vendedor: {melhor_vendedor} (R$ {melhor_valor:,.2f})')

# =============================================================================
# PARTE 3: ANÁLISE POR PRODUTO
# =============================================================================
print('\n' + '=' * 80)
print('📦 ANÁLISE DE PRODUTOS'.center(80))
print('=' * 80)

# Produtos únicos vendidos (usando set)
produtos_unicos = set()
for venda in vendas:
    produtos_unicos.add(venda['produto'])

print(f'\n📊 Total de produtos diferentes: {len(produtos_unicos)}')
print(f'📋 Produtos: {sorted(produtos_unicos)}')

# Contar quantas vezes cada produto foi vendido
vendas_produto = {}
for venda in vendas:
    produto = venda['produto']
    if produto in vendas_produto:
        vendas_produto[produto] += venda['valor']
    else:
        vendas_produto[produto] = venda['valor']

# Top 3 produtos
print('\n🏆 TOP 3 PRODUTOS:')
produtos_ordenados = []

for produto, valor in vendas_produto.items():
    produtos_ordenados.append((valor, produto))

# Ordenar (maior primeiro)
for i in range(len(produtos_ordenados)):
    for j in range(i + 1, len(produtos_ordenados)):
        if produtos_ordenados[i][0] < produtos_ordenados[j][0]:
            produtos_ordenados[i], produtos_ordenados[j] = produtos_ordenados[j], produtos_ordenados[i]

# Exibir top 3
for posicao in range(min(3, len(produtos_ordenados))):
    valor, produto = produtos_ordenados[posicao]
    print(f'{posicao + 1}º lugar - {produto}: R$ {valor:,.2f}')

# =============================================================================
# PARTE 4: ANÁLISE POR CATEGORIA
# =============================================================================
print('\n' + '=' * 80)
print('📁 ANÁLISE POR CATEGORIA'.center(80))
print('=' * 80)

# Agrupar por categoria
vendas_categoria = {}

for venda in vendas:
    categoria = venda['categoria']
    valor = venda['valor']
    
    if categoria in vendas_categoria:
        vendas_categoria[categoria] += valor
    else:
        vendas_categoria[categoria] = valor

# Exibir vendas por categoria
print(f'\n{'Categoria':<15} {'Total':>15} {'%':>10}')
print('-' * 80)

for categoria in sorted(vendas_categoria.keys()):
    valor = vendas_categoria[categoria]
    percentual = (valor / total_vendas) * 100
    print(f'{categoria:<15} R$ {valor:>12,.2f} {percentual:>9.1f}%')

# =============================================================================
# PARTE 5: ANÁLISE MENSAL
# =============================================================================
print('\n' + '=' * 80)
print('📅 EVOLUÇÃO MENSAL'.center(80))
print('=' * 80)

# Vendas por mês
vendas_mes = {}

for venda in vendas:
    mes = venda['mes']
    valor = venda['valor']
    
    if mes in vendas_mes:
        vendas_mes[mes] += valor
    else:
        vendas_mes[mes] = valor

# Ordem dos meses
ordem_meses = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 
               'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro']

print(f'\n{'Mês':<12} {'Total':>15} {'Vendas':>10}')
print('-' * 80)

# Contar vendas por mês
quantidade_mes = {}
for venda in vendas:
    mes = venda['mes']
    if mes in quantidade_mes:
        quantidade_mes[mes] += 1
    else:
        quantidade_mes[mes] = 1

# Exibir ordenado
for mes in ordem_meses:
    if mes in vendas_mes:
        valor = vendas_mes[mes]
        qtd = quantidade_mes[mes]
        print(f'{mes:<12} R$ {valor:>12,.2f} {qtd:>10}')

# =============================================================================
# PARTE 6: GRÁFICO DE BARRAS SIMPLES
# =============================================================================
print('\n' + '=' * 80)
print('📊 GRÁFICO DE VENDAS POR CATEGORIA'.center(80))
print('=' * 80)

# Encontrar valor máximo para escalar
max_valor = 0
for valor in vendas_categoria.values():
    if valor > max_valor:
        max_valor = valor

# Gerar gráfico
print()
for categoria in sorted(vendas_categoria.keys()):
    valor = vendas_categoria[categoria]
    barra_tamanho = int((valor / max_valor) * 40)  # Escalar para 40 caracteres
    barra = '█' * barra_tamanho
    print(f'{categoria:<15} {barra} R$ {valor:,.2f}')

# =============================================================================
# PARTE 7: BUSCAR VENDAS ESPECÍFICAS
# =============================================================================
print('\n' + '=' * 80)
print('🔍 BUSCAR VENDAS'.center(80))
print('=' * 80)

# Buscar vendas acima de R$ 1000
print('\n💎 Vendas acima de R$ 1.000,00:')
vendas_altas = []

for venda in vendas:
    if venda['valor'] > 1000:
        vendas_altas.append(venda)

print(f'{'Vendedor':<20} {'Produto':<15} {'Valor':>12} {'Mês':<12}')
print('-' * 80)

for venda in vendas_altas:
    print(f"{venda['vendedor']:<20} {venda['produto']:<15} R$ {venda['valor']:>9,.2f} {venda['mes']:<12}")

# =============================================================================
# PARTE 8: RESUMO FINAL
# =============================================================================
print('\n' + '=' * 80)
print('📋 RESUMO EXECUTIVO'.center(80))
print('=' * 80)

print(f'''
📊 ESTATÍSTICAS GERAIS:
   • Total de Vendas: {len(vendas)}
   • Faturamento Total: R$ {total_vendas:,.2f}
   • Ticket Médio: R$ {media:,.2f}
   
👥 VENDEDORES:
   • Total de Vendedores: {len(vendas_por_vendedor)}
   • Melhor Vendedor: {melhor_vendedor}
   
📦 PRODUTOS:
   • Produtos Diferentes: {len(produtos_unicos)}
   • Produto Campeão: {produtos_ordenados[0][1]}
   
📁 CATEGORIAS:
   • Total de Categorias: {len(vendas_categoria)}
   • Categoria Líder: {max(vendas_categoria, key=vendas_categoria.get)}
''')

print('=' * 80)
print('✅ Análise Completa! Sistema utilizou:')
print('   • Listas para armazenar vendas')
print('   • Dicionários para acumular totais')
print('   • Sets para produtos únicos')
print('   • Tuplas para estruturar dados')
print('   • Loops para processar informações')
print('=' * 80)</textarea>
            
            <button onclick="runCode()" class="btn-run">▶️ Executar Sistema Completo</button>
            <div id="output"></div>
        </div>
    </section>

    <section>
        <h2>🎯 Conceitos Aplicados</h2>
        <p>Este projeto integra TUDO que você aprendeu no módulo:</p>
        
        <div class="concepts-grid">
            <div class="concept-card">
                <h3>📋 Listas</h3>
                <ul>
                    <li>Armazenar múltiplas vendas</li>
                    <li>Percorrer com for</li>
                    <li>Ordenar dados</li>
                </ul>
            </div>
            
            <div class="concept-card">
                <h3>📖 Dicionários</h3>
                <ul>
                    <li>Estruturar cada venda</li>
                    <li>Acumular totais por chave</li>
                    <li>Mapear vendedor → valor</li>
                </ul>
            </div>
            
            <div class="concept-card">
                <h3>🎲 Sets</h3>
                <ul>
                    <li>Produtos únicos</li>
                    <li>Eliminar duplicatas</li>
                    <li>Contar distintos</li>
                </ul>
            </div>
            
            <div class="concept-card">
                <h3>📌 Tuplas</h3>
                <ul>
                    <li>Ordenar (valor, nome)</li>
                    <li>Estrutura imutável</li>
                    <li>Desempacotamento</li>
                </ul>
            </div>
        </div>
    </section>

    <section>
        <h2>💡 Desafios Extras</h2>
        <div class="challenge-box">
            <p>Tente melhorar o sistema:</p>
            <ul>
                <li>🎯 Adicionar filtro por período (mês específico)</li>
                <li>🎯 Calcular comissão dos vendedores (5% do total)</li>
                <li>🎯 Identificar produtos sem vendas</li>
                <li>🎯 Criar alerta para vendedores com baixo desempenho</li>
                <li>🎯 Comparar vendas entre meses (crescimento/queda)</li>
                <li>🎯 Gerar gráfico de evolução mensal</li>
            </ul>
        </div>
    </section>

    <section>
        <h2>🎓 O Que Você Domina Agora</h2>
        <p>Parabéns! Ao completar este módulo, você é capaz de:</p>
        
        <div class="skills-box">
            <h3>✅ Habilidades Conquistadas:</h3>
            <ul>
                <li>✅ Trabalhar com listas (criar, modificar, percorrer)</li>
                <li>✅ Usar tuplas para dados imutáveis</li>
                <li>✅ Aplicar sets para valores únicos</li>
                <li>✅ Dominar dicionários (chave-valor)</li>
                <li>✅ Ordenar e buscar dados</li>
                <li>✅ Acumular totais e calcular estatísticas</li>
                <li>✅ Agrupar e filtrar informações</li>
                <li>✅ Criar sistemas completos de análise</li>
                <li>✅ Escolher a estrutura certa para cada problema</li>
            </ul>
        </div>
    </section>

    <section>
        <h2>🚀 Próximos Passos</h2>
        <p>Agora você está pronto para o próximo módulo: <strong>MATRIZES</strong></p>
        <p>Lá você aprenderá a trabalhar com estruturas bidimensionais e problemas ainda mais complexos!</p>
    </section>
{% endblock %}

{% block extra_js %}
<script>
function runCode() {
    const code = document.getElementById('code-input').value;
    const output = document.getElementById('output');
    
    output.innerHTML = '<div class="output-success">✅ Sistema executado! Você integrou listas, dicionários, sets e tuplas em um projeto real!</div>';
}
</script>

<style>
.concepts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin: 20px 0;
}

.concept-card {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #007bff;
}

.concept-card h3 {
    margin-top: 0;
    color: #007bff;
}

.challenge-box {
    background: #fff3cd;
    padding: 20px;
    border-radius: 8px;
    border-left: 4px solid #ffc107;
    margin: 15px 0;
}

.skills-box {
    background: #d4edda;
    padding: 20px;
    border-radius: 8px;
    border-left: 4px solid #28a745;
    margin: 15px 0;
}

.highlight-box {
    background: #e7f3ff;
    padding: 15px;
    border-radius: 8px;
    margin: 15px 0;
}
</style>
{% endblock %}
