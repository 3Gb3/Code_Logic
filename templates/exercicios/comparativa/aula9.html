{% extends "base_aula.html" %}

{% block title %}Aula 9 - Boas PrÃ¡ticas | CodeLogic{% endblock %}

{% block lesson_title %}Aula 9 â€“ Boas PrÃ¡ticas em Estruturas Condicionais{% endblock %}

{% block lesson_content %}
    <section>
        <h2>ğŸ¯ Objetivo</h2>
        <ul>
            <li>Aplicar boas prÃ¡ticas em cÃ³digo condicional</li>
            <li>Escrever cÃ³digo mais limpo e legÃ­vel</li>
            <li>Evitar erros comuns e anti-padrÃµes</li>
        </ul>
    </section>

    <section>
        <h2>âœ¨ PrincÃ­pios de CÃ³digo Limpo</h2>
        
        <h3>1. Nomes Descritivos</h3>
        <div class="comparison">
            <div class="bad-example">
                <h4>âŒ Ruim:</h4>
                <pre><code>if x > 18:
    y = True</code></pre>
            </div>
            <div class="good-example">
                <h4>âœ… Bom:</h4>
                <pre><code>if idade > 18:
    pode_votar = True</code></pre>
            </div>
        </div>
        
        <h3>2. Evite NegaÃ§Ãµes DesnecessÃ¡rias</h3>
        <div class="comparison">
            <div class="bad-example">
                <h4>âŒ Ruim:</h4>
                <pre><code>if not not usuario_logado:
    print("Bem-vindo!")</code></pre>
            </div>
            <div class="good-example">
                <h4>âœ… Bom:</h4>
                <pre><code>if usuario_logado:
    print("Bem-vindo!")</code></pre>
            </div>
        </div>
    </section>

    <section>
        <h2>ğŸ—ï¸ EstruturaÃ§Ã£o de CondiÃ§Ãµes</h2>
        
        <h3>1. Early Return (Retorno Antecipado)</h3>
        <div class="comparison">
            <div class="bad-example">
                <h4>âŒ Ruim:</h4>
                <pre><code>def processar_usuario(usuario):
    if usuario is not None:
        if usuario.ativo:
            if usuario.idade >= 18:
                # processar usuÃ¡rio
                return True
            else:
                return False
        else:
            return False
    else:
        return False</code></pre>
            </div>
            <div class="good-example">
                <h4>âœ… Bom:</h4>
                <pre><code>def processar_usuario(usuario):
    if usuario is None:
        return False
    
    if not usuario.ativo:
        return False
    
    if usuario.idade < 18:
        return False
    
    # processar usuÃ¡rio
    return True</code></pre>
            </div>
        </div>
        
        <h3>2. Extrair CondiÃ§Ãµes Complexas</h3>
        <div class="comparison">
            <div class="bad-example">
                <h4>âŒ Ruim:</h4>
                <pre><code>if (usuario.idade >= 18 and usuario.tem_carteira and 
    usuario.pontos >= 10 and not usuario.suspenso):
    liberar_acesso()</code></pre>
            </div>
            <div class="good-example">
                <h4>âœ… Bom:</h4>
                <pre><code>def pode_acessar(usuario):
    return (usuario.idade >= 18 and 
            usuario.tem_carteira and 
            usuario.pontos >= 10 and 
            not usuario.suspenso)

if pode_acessar(usuario):
    liberar_acesso()</code></pre>
            </div>
        </div>
    </section>

    <section>
        <h2>ğŸ” ValidaÃ§Ã£o Eficiente</h2>
        
        <h3>1. ValidaÃ§Ã£o em Cascata</h3>
        <pre><code>def validar_email(email):
    """Valida email de forma estruturada"""
    if not email:
        return False, "Email Ã© obrigatÃ³rio"
    
    if "@" not in email:
        return False, "Email deve conter @"
    
    if "." not in email.split("@")[1]:
        return False, "DomÃ­nio invÃ¡lido"
    
    return True, "Email vÃ¡lido"

# Uso
email = input("Digite seu email: ")
valido, mensagem = validar_email(email)

if valido:
    print(f"âœ… {mensagem}")
else:
    print(f"âŒ {mensagem}")</code></pre>
    
        <h3>2. DicionÃ¡rio para MÃºltiplas CondiÃ§Ãµes</h3>
        <pre><code># Em vez de muitos if-elif
def calcular_desconto(categoria):
    descontos = {
        "vip": 0.20,
        "premium": 0.15,
        "regular": 0.10,
        "bronze": 0.05
    }
    return descontos.get(categoria, 0)</code></pre>
    </section>

    <section>
        <h2>ğŸš« Erros Comuns a Evitar</h2>
        
        <h3>1. ComparaÃ§Ã£o com True/False</h3>
        <div class="comparison">
            <div class="bad-example">
                <h4>âŒ Ruim:</h4>
                <pre><code>if usuario_ativo == True:
    print("UsuÃ¡rio ativo")</code></pre>
            </div>
            <div class="good-example">
                <h4>âœ… Bom:</h4>
                <pre><code>if usuario_ativo:
    print("UsuÃ¡rio ativo")</code></pre>
            </div>
        </div>
        
        <h3>2. CondiÃ§Ãµes Redundantes</h3>
        <div class="comparison">
            <div class="bad-example">
                <h4>âŒ Ruim:</h4>
                <pre><code>if idade >= 18:
    pode_votar = True
else:
    pode_votar = False</code></pre>
            </div>
            <div class="good-example">
                <h4>âœ… Bom:</h4>
                <pre><code>pode_votar = idade >= 18</code></pre>
            </div>
        </div>
        
        <h3>3. Aninhamento Excessivo</h3>
        <div class="comparison">
            <div class="bad-example">
                <h4>âŒ Ruim:</h4>
                <pre><code>if usuario:
    if usuario.ativo:
        if usuario.permissao:
            if recurso_disponivel:
                processar()</code></pre>
            </div>
            <div class="good-example">
                <h4>âœ… Bom:</h4>
                <pre><code>if not usuario:
    return
if not usuario.ativo:
    return
if not usuario.permissao:
    return
if not recurso_disponivel:
    return

processar()</code></pre>
            </div>
        </div>
    </section>

    <section>
        <h2>ğŸ“Š Exemplo PrÃ¡tico Completo</h2>
        <pre><code>class SistemaLogin:
    def __init__(self):
        self.tentativas_maximas = 3
        self.usuarios = {
            "admin": {"senha": "123456", "ativo": True},
            "user": {"senha": "password", "ativo": False}
        }
    
    def validar_credenciais(self, usuario, senha):
        """Valida credenciais com mensagens especÃ­ficas"""
        if not usuario or not senha:
            return False, "UsuÃ¡rio e senha sÃ£o obrigatÃ³rios"
        
        if usuario not in self.usuarios:
            return False, "UsuÃ¡rio nÃ£o encontrado"
        
        dados_usuario = self.usuarios[usuario]
        
        if not dados_usuario["ativo"]:
            return False, "UsuÃ¡rio inativo"
        
        if dados_usuario["senha"] != senha:
            return False, "Senha incorreta"
        
        return True, "Login realizado com sucesso"
    
    def fazer_login(self):
        """Sistema de login com controle de tentativas"""
        tentativas = 0
        
        while tentativas < self.tentativas_maximas:
            usuario = input("UsuÃ¡rio: ")
            senha = input("Senha: ")
            
            sucesso, mensagem = self.validar_credenciais(usuario, senha)
            
            if sucesso:
                print(f"âœ… {mensagem}")
                return True
            
            tentativas += 1
            restantes = self.tentativas_maximas - tentativas
            
            print(f"âŒ {mensagem}")
            
            if restantes > 0:
                print(f"Tentativas restantes: {restantes}")
            else:
                print("ğŸ”’ Acesso bloqueado - muitas tentativas")
                return False
        
        return False</code></pre>
    </section>

    <section>
        <h2>ğŸ® ExercÃ­cio PrÃ¡tico</h2>
        <div class="exercise-box">
            <h3>RefatoraÃ§Ã£o de CÃ³digo</h3>
            <p>Refatore o cÃ³digo abaixo aplicando as boas prÃ¡ticas aprendidas:</p>
            
            <textarea id="code-input" placeholder="# CÃ³digo para refatorar
def verificar_acesso(u):
    if u != None:
        if u['idade'] >= 18:
            if u['ativo'] == True:
                if u['verificado'] == True:
                    if u['bloqueado'] == False:
                        return True
                    else:
                        return False
                else:
                    return False
            else:
                return False
        else:
            return False
    else:
        return False

# Refatore este cÃ³digo seguindo as boas prÃ¡ticas"></textarea>
            
            <button onclick="runCode()" class="btn-run">â–¶ï¸ Verificar RefatoraÃ§Ã£o</button>
            <div id="output"></div>
        </div>
    </section>

    <section>
        <h2>ğŸ“‹ Checklist de Boas PrÃ¡ticas</h2>
        <div class="checklist">
            <ul>
                <li>âœ… Usar nomes descritivos para variÃ¡veis e funÃ§Ãµes</li>
                <li>âœ… Evitar aninhamento excessivo (mÃ¡ximo 3 nÃ­veis)</li>
                <li>âœ… Preferir early returns</li>
                <li>âœ… Extrair condiÃ§Ãµes complexas em funÃ§Ãµes</li>
                <li>âœ… Evitar comparaÃ§Ãµes desnecessÃ¡rias com True/False</li>
                <li>âœ… Usar comentÃ¡rios para lÃ³gica complexa</li>
                <li>âœ… Validar entrada de dados</li>
                <li>âœ… Retornar mensagens de erro especÃ­ficas</li>
                <li>âœ… Manter consistÃªncia no estilo do cÃ³digo</li>
                <li>âœ… Testar todas as condiÃ§Ãµes possÃ­veis</li>
            </ul>
        </div>
    </section>

    <section>
        <h2>ğŸ’¡ Dicas Finais</h2>
        <div class="tip-box">
            <ul>
                <li>ğŸ“– CÃ³digo Ã© escrito uma vez, mas lido muitas vezes</li>
                <li>ğŸ§ª Sempre teste casos extremos e valores invÃ¡lidos</li>
                <li>ğŸ”„ Refatore regularmente para melhorar a qualidade</li>
                <li>ğŸ‘¥ PeÃ§a feedback de outros programadores</li>
                <li>ğŸ“š Continue estudando padrÃµes e prÃ¡ticas da comunidade</li>
            </ul>
        </div>
    </section>
{% endblock %}

{% block extra_js %}
<script>
function runCode() {
    const code = document.getElementById('code-input').value;
    const output = document.getElementById('output');
    
    output.innerHTML = '<div class="output-success">RefatoraÃ§Ã£o analisada! Compare seu cÃ³digo com as boas prÃ¡ticas apresentadas.</div>';
}
</script>
{% endblock %}